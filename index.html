<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="source/css/style.css">
	

	<title>Projeto Estudo</title>
</head>
<body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script>

	<script type="text/javascript">
		var app = angular.module("menuApp", ["ngRoute"]);

		app.config(function($routeProvider) {
			$routeProvider
				.when("/clientes", {
					templateUrl : "clientes.html",
					controller : "clienteCotnroller"
				})
				.when("/produtos", {
					templateUrl : "produtos.html",
					controller : "produtoController"
				});
		});

		<!-- Produto controller -->

		app.controller("produtoController", function($scope, $http) {
			$scope.isEdit = false;
			$scope.produtoSelec = {};

			$http.post('classes/actions/ProdutoActions/CarregarProdutos.php')
			.then(function(response) {
				$scope.produtos = response.data.produtos;
			});

			$scope.editar = function(produto) {
				console.log(produto.nome);
				$scope.produtoSelec = produto;
				$scope.isEdit = true;
			};	

			$scope.salvar = function() {
				if($scope.isEdit) {
					$http.post("classes/actions/ProdutoActions/AlterarProduto.php", {"codigo":$scope.produtoSelec.codigo, "nome":$scope.produtoSelec.nome})
						.then(function(response) {
							console.info(response.data);
						});
				} else {
					$http.post("classes/actions/ProdutoActions/SalvarProduto.php", {"codigo":$scope.produtoSelec.codigo, "nome":$scope.produtoSelec.nome})
						.then(function(response) {
							console.info(response.data);
						});
					$scope.produtos.push($scope.produtoSelec);
				}

				$scope.isEdit = false;
				$scope.produtoSelec = {};
			};

			$scope.remover = function(produto) {
				$scope.produtos.splice($scope.produtos.indexOf(produto), 1);
				$scope.isEdit = false;
				$scope.produtoSelec = {};

				$http.post('classes/actions/ProdutoActions/DeletarProduto.php', {"codigo":produto.codigo})
					.then(function(response) {
						console.info(response.data);
				});
			};
		});

		<!-- Cliente controller -->

		app.controller("clienteCotnroller", function($scope, $http) {
			$scope.valuesUF = ["Emil", "Tobias", "Linus"];

			var isEdit = false;

			$http.post('classes/actions/ClienteActions/CarregarClientes.php')
				.then(function(response) {
					$scope.clientes = response.data.clientes;
				});

			$scope.novo = function() {
				$scope.cliente = {};
				isEdit = false;
			}

			$scope.salvar = function() {
				var json = angular.toJson($scope.cliente);
				
				if(isEdit) {
					$http.post('classes/actions/ClienteActions/AlterarCliente.php', json);
					console.info(json);
				} else {
					$http.post('classes/actions/ClienteActions/SalvarCliente.php', json)
						.then(function(response) {
							console.info(response.data);
						});
					$scope.clientes.push($scope.cliente);
				}
				
				$scope.cliente = {};
				isEdit = false;
			};

			$scope.alterar = function(cliente) {
				$scope.cliente = cliente;
				isEdit = true;
			};

			$scope.remover = function(cliente) {
				$http.post('classes/actions/ClienteActions/DeletarCliente.php', {"cnpj":cliente.cnpj});
				$scope.clientes.splice($scope.clientes.indexOf(cliente), 1);
				$scope.cliente = {};
				isEdit = false;
			};
		});		
	</script>

	<div ng-app="menuApp">
		
		<div class="navbar navbar-inverse">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="dropdown-cadastro" aria-expanded="false">
						<span class="sr-only">Toggle Navigation</span>
						<span class="icon-bar"></span>					
						<span class="icon-bar"></span>					
						<span class="icon-bar"></span>					
					</button>

					<a href="#!/" class="navbar-brand">Home</a>
				</div>

				<div class="collapse navbar-collapse" id="dropdown-cadastro">
					<ul class="nav navbar-nav">
						<li class="dropdown">
							<a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Cadastro<span class="caret"></span></a>
							
							<ul class="dropdown-menu">
								<li><a href="#!clientes">Cliente</a></li>
								<li><a href="#!produtos">Produto</a></li>	
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>

		<div ng-view></div>
	
	</div>
</body>
</html>